# ğŸ‰ Neo4j Text2SQL - ìµœì¢… ì„¤ì • ì™„ë£Œ

## âœ… í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì„œë¹„ìŠ¤

| ì„œë¹„ìŠ¤ | í¬íŠ¸ | URL | ìƒíƒœ |
|--------|------|-----|------|
| **ğŸŒ‰ Gateway** | 9090 | http://localhost:9090 | âœ… ì‹¤í–‰ ì¤‘ |
| ğŸ¨ Frontend | 3000 | http://localhost:3000 | âœ… ì‹¤í–‰ ì¤‘ |
| ğŸ”§ Backend API | 8001 | http://localhost:8001 | âœ… ì‹¤í–‰ ì¤‘ |
| ğŸ—„ï¸ Neo4j | 7474/7687 | http://localhost:7474 | âœ… ì‹¤í–‰ ì¤‘ |
| ğŸ˜ PostgreSQL | 5432 | localhost:5432 | âœ… ì‹¤í–‰ ì¤‘ |

## ğŸŒŸ ê¶Œì¥ ì ‘ì† ë°©ë²•

### **Gateway í†µí•© URL (ê¶Œì¥)** ğŸŒ‰

```
http://localhost:9090
```

**ì¥ì **:
- âœ… CORS ë¬¸ì œ ì™„ì „ í•´ê²°
- âœ… ë‹¨ì¼ ë„ë©”ì¸ìœ¼ë¡œ ëª¨ë“  ì„œë¹„ìŠ¤ ì ‘ê·¼
- âœ… í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œê°€ ê°™ì€ í˜¸ìŠ¤íŠ¸
- âœ… ë°°í¬ í™˜ê²½ ë³€ê²½ ìš©ì´

**ë™ì‘ ë°©ì‹**:
```
http://localhost:9090/          â†’ Frontend (Vue.js)
http://localhost:9090/schema    â†’ Frontend (Vue.js)
http://localhost:9090/api/*     â†’ Backend (FastAPI)
```

## ğŸš€ ì‹œìŠ¤í…œ ì‹œì‘/ì¢…ë£Œ

### ì „ì²´ ì‹œìŠ¤í…œ ì‹œì‘

```bash
./start-all.sh
```

ì´ ëª…ë ¹ìœ¼ë¡œ ë‹¤ìŒì´ ìë™ ì‹¤í–‰ë©ë‹ˆë‹¤:
1. Docker (Neo4j + PostgreSQL)
2. Backend API (FastAPI)
3. Frontend (Vue.js)
4. Gateway (Spring Cloud)

### ì „ì²´ ì‹œìŠ¤í…œ ì¢…ë£Œ

```bash
./stop-all.sh
```

### Gatewayë§Œ ì¬ì‹œì‘

```bash
cd gateway
pkill -f "spring-boot:run"
mvn spring-boot:run > gateway.log 2>&1 &
```

## ğŸ“Š ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ë¸Œë¼ìš°ì € (http://localhost:9090)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Spring Cloud Gateway (í¬íŠ¸ 9090)                â”‚
â”‚     - CORS ì²˜ë¦¬                                      â”‚
â”‚     - ë¼ìš°íŒ… ê·œì¹™                                    â”‚
â”‚     - ë¡œë“œ ë°¸ëŸ°ì‹± (í–¥í›„)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                      â”‚
            â†“                      â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Vue.js     â”‚      â”‚  FastAPI        â”‚
    â”‚   (3000)     â”‚      â”‚  (8001)         â”‚
    â”‚              â”‚      â”‚  + LangChain    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â†“              â†“              â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Neo4j   â”‚   â”‚PostgreSQLâ”‚  â”‚ OpenAI   â”‚
            â”‚  (7474)  â”‚   â”‚  (5432)  â”‚  â”‚   API    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: Gatewayë¥¼ í†µí•œ ì ‘ê·¼ (í”„ë¡œë•ì…˜ê³¼ ìœ ì‚¬)

```bash
# 1. ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†
open http://localhost:9090

# 2. ì§ˆì˜ í™”ë©´ì—ì„œ ì§ˆë¬¸
"ì¹´í…Œê³ ë¦¬ë³„ ìƒí’ˆ ê°œìˆ˜"

# 3. API í˜¸ì¶œ íë¦„
ë¸Œë¼ìš°ì € â†’ http://localhost:9090/api/ask
  â†“ Gateway ë¼ìš°íŒ…
Backend â†’ http://localhost:8001/ask
  â†“ LLM ì²˜ë¦¬
ì‘ë‹µ â†’ ë¸Œë¼ìš°ì €
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì§ì ‘ ì ‘ê·¼ (ê°œë°œ/ë””ë²„ê¹…)

```bash
# Frontend ì§ì ‘ ì ‘ì†
open http://localhost:3000

# Backend API ì§ì ‘ í…ŒìŠ¤íŠ¸
curl http://localhost:8001/health
```

## ğŸ”§ ì„¤ì • íŒŒì¼ ìœ„ì¹˜

| ì„œë¹„ìŠ¤ | ì„¤ì • íŒŒì¼ |
|--------|----------|
| Gateway | `gateway/src/main/resources/application.yml` |
| Backend | `app/config.py`, `.env` |
| Frontend | `frontend/vite.config.ts`, `frontend/.env` |
| Docker | `docker-compose.yml` |

## ğŸ“ ë¡œê·¸ í™•ì¸

```bash
# Gateway ë¡œê·¸
tail -f gateway/gateway.log

# Backend ë¡œê·¸
tail -f api.log

# Frontend ë¡œê·¸
tail -f frontend/frontend.log

# ì „ì²´ ë¡œê·¸ ë™ì‹œ ë³´ê¸°
tail -f gateway/gateway.log api.log frontend/frontend.log
```

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### CORS ì˜¤ë¥˜ê°€ ì—¬ì „íˆ ë°œìƒí•˜ëŠ” ê²½ìš°

```bash
# 1. Gatewayë¥¼ í†µí•´ ì ‘ì†í•˜ê³  ìˆëŠ”ì§€ í™•ì¸
echo "í˜„ì¬ URL: http://localhost:9090 ì¸ì§€ í™•ì¸"

# 2. ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œ
# Chrome: Cmd+Shift+Delete â†’ ìºì‹œ ì´ë¯¸ì§€ ë° íŒŒì¼ ì‚­ì œ

# 3. Gateway ë¡œê·¸ í™•ì¸
tail -f gateway/gateway.log | grep -i cors
```

### Gatewayê°€ ì‘ë‹µí•˜ì§€ ì•ŠëŠ” ê²½ìš°

```bash
# í¬íŠ¸ í™•ì¸
lsof -i :9090

# Gateway í”„ë¡œì„¸ìŠ¤ í™•ì¸
ps aux | grep spring-boot

# Gateway ì¬ì‹œì‘
cd gateway
pkill -f "spring-boot:run"
mvn spring-boot:run > gateway.log 2>&1 &
```

### 500 ì—ëŸ¬ ë°œìƒ ì‹œ

```bash
# Backend ë¡œê·¸ í™•ì¸
tail -50 api.log

# Backend í—¬ìŠ¤ì²´í¬
curl http://localhost:8001/health

# Neo4j ì—°ê²° í™•ì¸
docker exec neo4j_text2sql cypher-shell -u neo4j -p password123 "RETURN 1;"
```

## ğŸ“Š ì„±ëŠ¥ ë¹„êµ

### Gateway ì‚¬ìš© ì‹œ

```
ë¸Œë¼ìš°ì € â†’ Gateway â†’ Backend
ì´ ì‘ë‹µ ì‹œê°„: ì•½ 9ì´ˆ (+ 5-10ms ê²Œì´íŠ¸ì›¨ì´ ì˜¤ë²„í—¤ë“œ)
```

### ì§ì ‘ ì ‘ê·¼ ì‹œ

```
ë¸Œë¼ìš°ì € â†’ Backend (with Vite proxy)
ì´ ì‘ë‹µ ì‹œê°„: ì•½ 9ì´ˆ
```

**ê²°ë¡ **: Gateway ì˜¤ë²„í—¤ë“œëŠ” ë¬´ì‹œí•  ìˆ˜ ìˆëŠ” ìˆ˜ì¤€ (< 1%)

## ğŸš¢ í”„ë¡œë•ì…˜ ë°°í¬ ì‹œë‚˜ë¦¬ì˜¤

### 1. Docker Composeë¡œ ì „ì²´ ìŠ¤íƒ

```yaml
version: '3.8'
services:
  gateway:
    build: ./gateway
    ports:
      - "80:9090"
  
  backend:
    build: .
    environment:
      - NEO4J_URI=bolt://neo4j:7687
  
  frontend:
    build: ./frontend
    environment:
      - VITE_API_URL=/api
  
  neo4j:
    image: neo4j:5.23-community
  
  postgres:
    image: postgres:16-alpine
```

### 2. Kubernetes

```yaml
apiVersion: v1
kind: Service
metadata:
  name: gateway
spec:
  type: LoadBalancer
  ports:
    - port: 80
      targetPort: 9090
```

## ğŸ“ ë°°ìš´ ì 

### Gatewayì˜ ì—­í• 

1. **ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ**: ìš”ì²­ì„ ì ì ˆí•œ ì„œë¹„ìŠ¤ë¡œ ë¼ìš°íŒ…
2. **CORS ì²˜ë¦¬**: ë¸Œë¼ìš°ì € ë³´ì•ˆ ì •ì±… ìš°íšŒ
3. **ë‹¨ì¼ ì§„ì…ì **: í´ë¼ì´ì–¸íŠ¸ëŠ” í•˜ë‚˜ì˜ URLë§Œ ì•Œë©´ ë¨
4. **ë¡œë“œ ë°¸ëŸ°ì‹±**: ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë¶„ì‚° (í–¥í›„)
5. **API ê²Œì´íŠ¸ì›¨ì´ íŒ¨í„´**: MSAì˜ í•µì‹¬ ì»´í¬ë„ŒíŠ¸

### Spring Cloud Gateway vs Nginx

| íŠ¹ì§• | Spring Cloud Gateway | Nginx |
|------|---------------------|-------|
| ì„±ëŠ¥ | ìš°ìˆ˜ (ë¹„ë™ê¸°) | ë§¤ìš° ìš°ìˆ˜ |
| ì„¤ì • | Java/YAML | ì„¤ì • íŒŒì¼ |
| í†µí•© | Spring ìƒíƒœê³„ | ë²”ìš© |
| ë™ì  ë¼ìš°íŒ… | ì‰¬ì›€ | ë³µì¡ |
| ëª¨ë‹ˆí„°ë§ | Actuator | ë³„ë„ ë„êµ¬ |

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- `GATEWAY_GUIDE.md` - Gateway ìƒì„¸ ê°€ì´ë“œ
- `FRONTEND_GUIDE.md` - Frontend ê°€ì´ë“œ
- `README.md` - í”„ë¡œì íŠ¸ ì „ì²´ ê°œìš”
- `TEST_GUIDE.md` - í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ
- `QUICK_TEST.md` - ë¹ ë¥¸ ì‹œì‘

## ğŸ‰ ì™„ì„±!

**ëª¨ë“  ì‹œìŠ¤í…œì´ Gatewayë¥¼ í†µí•´ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤!**

```
ğŸŒ í†µí•© URL: http://localhost:9090

âœ… CORS ë¬¸ì œ í•´ê²°
âœ… ë‹¨ì¼ ë„ë©”ì¸
âœ… í”„ë¡œë•ì…˜ ì¤€ë¹„ ì™„ë£Œ
âœ… í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜
```

**ì´ì œ ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:9090 ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”!** ğŸš€

